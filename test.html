<!DOCTYPE html>
<html>
<head>
    <title>Quản lí đặt phòng khách sạn</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css">
    <style>
        td {
            height: 100px;
        }
        .booked {
            background-color: yellow;
        }
        .occupied {
            background-color: red;
        }
        .available {
            background-color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Quản lí đặt phòng khách sạn</h1>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Phòng</th>
                    <th>Thứ 2</th>
                    <th>Thứ 3</th>
                    <th>Thứ 4</th>
                    <th>Thứ 5</th>
                    <th>Thứ 6</th>
                    <th>Thứ 7</th>
                    <th>Chủ nhật</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>101</td>
                    <td data-room="101" data-day="Monday"></td>
                    <td data-room="101" data-day="Tuesday"></td>
                    <td data-room="101" data-day="Wednesday"></td>
                    <td data-room="101" data-day="Thursday"></td>
                    <td data-room="101" data-day="Friday"></td>
                    <td data-room="101" data-day="Saturday"></td>
                    <td data-room="101" data-day="Sunday"></td>
                </tr>
                <!-- Thêm các hàng khác tương tự -->
            </tbody>
        </table>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Lấy dữ liệu từ Local Storage
        function getBookingData() {
            const bookingData = localStorage.getItem("bookingData");
            return bookingData ? JSON.parse(bookingData) : {};
        }

        // Lưu dữ liệu vào Local Storage
        function saveBookingData(data) {
            localStorage.setItem("bookingData", JSON.stringify(data));
        }

        // Chức năng thêm lịch đặt phòng
        function bookRoom(room, day) {
            const cell = document.querySelector(`td[data-room="${room}"][data-day="${day}"]`);
            cell.classList.remove("occupied");
            cell.classList.remove("available");
            cell.classList.add("booked");

            // Lấy dữ liệu hiện tại
            const bookingData = getBookingData();

            // Thêm lịch đặt phòng mới
            if (!bookingData[room]) {
                bookingData[room] = {};
            }
            bookingData[room][day] = "booked";

            // Lưu dữ liệu mới vào Local Storage
            saveBookingData(bookingData);
        }

        // Chức năng sửa lịch đặt phòng
        function editBooking(room, day) {
            const cell = document.querySelector(`td[data-room="${room}"][data-day="${day}"]`);
            cell.classList.remove("booked");
            cell.classList.remove("available");
            cell.classList.add("occupied");

            // Lấy dữ liệu hiện tại
            const bookingData = getBookingData();

            // Cập nhật lịch đặt phòng
            if (!bookingData[room]) {
                bookingData[room] = {};
            }
            bookingData[room][day] = "occupied";

            // Lưu dữ liệu mới vào Local Storage
            saveBookingData(bookingData);
        }

        // Chức năng xóa lịch đặt phòng
        function cancelBooking(room, day) {
            const cell = document.querySelector(`td[data-room="${room}"][data-day="${day}"]`);
            cell.classList.remove("booked");
            cell.classList.remove("occupied");
            cell.classList.add("available");

            // Lấy dữ liệu hiện tại
            const bookingData = getBookingData();

            // Xóa lịch đặt phòng
            if (bookingData[room] && bookingData[room][day]) {
                delete bookingData[room][day];

                // Nếu không còn lịch đặt phòng cho phòng này, xóa cả phòng
                if (Object.keys(bookingData[room]).length === 0) {
                    delete bookingData[room];
                }

                // Lưu dữ liệu mới vào Local Storage
                saveBookingData(bookingData);
            }
        }

        // Tải dữ liệu lịch đặt phòng từ Local Storage và áp dụng lên giao diện
        function loadBookingData() {
            const bookingData = getBookingData();
            const cells = document.querySelectorAll("td[data-room][data-day]");

            cells.forEach((cell) => {
                const room = cell.getAttribute("data-room");
                const day = cell.getAttribute("data-day");

                if (bookingData[room] && bookingData[room][day]) {
                    const status = bookingData[room][day];
                    cell.classList.add(status);
                } else {
                    cell.classList.add("available");
                }
            });
        }

        // Sự kiện tải trang
        document.addEventListener("DOMContentLoaded", () => {
            loadBookingData();

            // Gọi các hàm chức năng mẫu
            bookRoom("101", "Monday");
            editBooking("101", "Tuesday");
            cancelBooking("101", "Wednesday");
        });
    </script>
</body>
</html>
